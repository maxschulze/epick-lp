window.epick.api_endpoint="https://zh69w50ee5.execute-api.eu-central-1.amazonaws.com/prod",angular.module("createProfile",[]).controller("CreateProfileController",["$scope","$document","$http","$window",function(e,o,t,r){e.step=1,e.profile={looking_for_ranked_team:!1,looking_to_build_ranked_team:!1,looking_for_compatible_team:!1,use_voice_chat:!1},e.showHeroSelect=!1,e.selectedHeroes=[],e.selectField=null,e.heroes=window.epick.heroes,e.selectChanged=function(o,t){e.profile[o]=t,e.$apply()},e.$watch("profile.avatar_id",function(o){o&&(e.avatarStyle={"background-image":"url('/images/heroes/"+o+"@2x.png')"})}),e.hideHeroSelect=function(){e.showHeroSelect=!1,e.selectField&&(e.profile[e.selectField]=e.selectedHeroes.join(","))},e.next=function(){e.form.$valid&&(e.step=2)},e.save=function(){return!e.saving&&(!e.form.$invalid&&!e.account_form.$invalid&&(e.saving=!0,void t.post(window.epick.api_endpoint+"/profiles",e.profile).then(function(o){o.error?e.fail():r.location.href="https://epick.gg/profiles/"+o.data.permalink,e.saving=!1},function(){e.fail(),e.saving=!1})))},e.fail=function(){alert("Sorry, there was an error creating your account. Please make sure your Gamer Tag and E-Mail have not been used yet. If you think this is an error, contact us at hi@epick.gg!")},e.selectAvatar=function(){"avatar_id"!=e.selectField&&(e.profile.avatar_id?e.selectedHeroes=[e.profile.avatar_id]:e.selectedHeroes=[],e.selectField="avatar_id"),e.heroFilter={},e.showHeroSelect=!0,e.closeAfterFirstHeroSelected=!0},e.selectHeroes=function(){"favorite_hero_ids"!=e.selectField&&(e.selectedHeroes=[],e.selectField="favorite_hero_ids"),e.heroFilter={role:e.profile.favorite_role},e.showHeroSelect=!0,e.closeAfterFirstHeroSelected=!1},e.heroSelected=function(o){return e.selectedHeroes.indexOf(o)},e.toggleHero=function(o){e.closeAfterFirstHeroSelected?(e.selectedHeroes=[o],e.hideHeroSelect()):(index=e.heroSelected(o),index!=-1?e.selectedHeroes.splice(index,1):e.selectedHeroes.push(o))},window.globalized_scope=e}]).config(function(){});